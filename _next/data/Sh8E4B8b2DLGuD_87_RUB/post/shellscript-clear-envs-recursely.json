{"pageProps":{"toc":[{"content":"はじめに","slug":"はじめに","lvl":2,"i":0},{"content":"要件","slug":"要件","lvl":2,"i":1},{"content":"venvの場合","slug":"venvの場合","lvl":2,"i":2},{"content":"npmの場合","slug":"npmの場合","lvl":2,"i":3},{"content":"つくるのは","slug":"つくるのは","lvl":2,"i":4},{"content":"スクリプト","slug":"スクリプト","lvl":2,"i":5},{"content":"コードの解説","slug":"コードの解説","lvl":2,"i":6},{"content":"venvの記録と削除","slug":"venvの記録と削除","lvl":3,"i":7},{"content":"node_modulesの削除","slug":"node_modulesの削除","lvl":3,"i":8},{"content":"検出とクリア","slug":"検出とクリア","lvl":3,"i":9},{"content":"再帰的な検出とクリア","slug":"再帰的な検出とクリア","lvl":3,"i":10},{"content":"呼び出し用関数","slug":"呼び出し用関数","lvl":3,"i":11},{"content":"おわりに","slug":"おわりに","lvl":2,"i":12},{"content":"参考","slug":"参考","lvl":2,"i":13}],"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    pre: \"pre\",\n    code: \"code\",\n    h2: \"h2\",\n    a: \"a\",\n    span: \"span\",\n    p: \"p\",\n    ol: \"ol\",\n    li: \"li\",\n    h3: \"h3\",\n    ul: \"ul\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"本記事のスクリプトは自由に複製・改変して実行していただいて構いませんが，\\nそれによって生じた損害等の一切の責任は負いかねます．\\n\\n私自身の環境で動作するために開発しているため，\\n悪意無く開発しており，\\n当環境における動作確認は出来ております．\\n\\nしかし，コンピュータに影響を及ぼすスクリプトですので，\\n全て自己責任の元でお使い頂くよう，\\nよろしくお願いいたします．\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"はじめに\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#はじめに\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"はじめに\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"メインのデスクトップにUbuntuを使っていて，たまに\", _jsx(_components.code, {\n        children: \"backups\"\n      }), \"を使ってバックアップを取っている．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"そして私は，Pythonの実行環境の整備には\", _jsx(_components.code, {\n        children: \"venv\"\n      }), \"を，Node.jsにはもちろんnpmを使っている．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"その上でバックアップを取ると，どうしても大量の\", _jsx(_components.code, {\n        children: \".venv\"\n      }), \"および\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"が気になってしまう．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"以前，解消方法を模索したことがあり，その時は\", _jsx(_components.code, {\n        children: \"backups\"\n      }), \"の\", _jsx(_components.code, {\n        children: \"Folders to ignore\"\n      }), \"にワイルドカードが使えるという情報をどこかで見て，設定して試してみたのだが，どうやら適用されていなかったようで，断念した．\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"今回は，ディスク容量含め抜本的な解決を目指し，シェルスクリプトの関数を作ってみた．\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"要件\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#要件\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"要件\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"当然，情報量を極力減らさない方法での解決を目指す．\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"venvの場合\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#venvの場合\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"venvの場合\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"私は普段，Pythonの環境を作成する際には，決まって\", _jsx(_components.code, {\n        children: \"python -m venv .venv\"\n      }), \"を使っている．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"このように統一することで，カレントディレクトリに\", _jsx(_components.code, {\n        children: \".venv\"\n      }), \"がある時に自動アクティベートするという恩恵を得られる．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \".venv\"\n      }), \"を消すと，対象の実行環境はきれいに削除される．\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"また，上述したコマンドでは，クリーンなPython環境が作成され，インストールしてあるパッケージのみで動作可能という前提がある．\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"pip\"\n      }), \"には，適切な形式の\", _jsx(_components.code, {\n        children: \"requirements.txt\"\n      }), \"に対し，\", _jsx(_components.code, {\n        children: \"pip -r requirements.txt\"\n      }), \"と実行することで，パッケージのバージョンを揃えてくれる機能がある．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"requirements.txt\"\n      }), \"は，\", _jsx(_components.code, {\n        children: \"pip freeze\"\n      }), \"により生成でき，これによって今のパッケージバージョンを全て記録できる．\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"npmの場合\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#npmの場合\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"npmの場合\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"npmパッケージのローカルインストールは，\", _jsx(_components.code, {\n        children: \"package.json\"\n      }), \"にパッケージ情報が保存され，\", _jsx(_components.code, {\n        children: \"package-lock.json\"\n      }), \"に詳細なパッケージバージョンを含む情報が保存される．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"そして，パッケージの実態は\", _jsx(_components.code, {\n        children: \"./node_modules\"\n      }), \"内に全て保存される．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ここで，\", _jsx(_components.code, {\n        children: \"./node_modules\"\n      }), \"にあるものは全て，npmが存在している限り\", _jsx(_components.code, {\n        children: \"package-lock.json\"\n      }), \"から復元可能である．\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"つくるのは\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#つくるのは\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"つくるのは\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"以上の前提の元，venvおよびnpmに対して必要な処理が決まった．\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \".venv\"\n        }), \"を見つけ，\", _jsx(_components.code, {\n          children: \"pip freeze\"\n        }), \"で環境情報をテキストに保存し，\", _jsx(_components.code, {\n          children: \".venv\"\n        }), \"を削除\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"node_modules\"\n        }), \"を削除\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"両者に対し，検出時に削除の可否を求める\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"スクリプト\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#スクリプト\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"スクリプト\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"clear_python_venv\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"source\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"${python_venv_key}\"\n        }), \"/bin/activate\\n  pip freeze \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/requirements.txt\\n  deactivate\\n  \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"rm\"\n        }), \" -r \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"${python_venv_key}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"clear_node_modules\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"rm\"\n        }), \" -r \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"${node_env_key}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"detect_venvs_and_clear\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" -e \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"/\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${python_venv_key}\"\n          }), \"\\\"\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"\\\"\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Detect \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${python_venv_key}\"\n          }), \" in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"read\"\n        }), \" -p \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Do you clear? [y/N]\\\"\"\n        }), \" -r\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"!\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token environment constant\",\n          children: \"$REPLY\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=~\"\n        }), \" ^\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \"yN\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \"$ \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"return\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Clearing \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${python_venv_key}\"\n          }), \"        in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    clear_python_venv \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" -e \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"/\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \"\\\"\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"\\\"\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Detect \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \" in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"read\"\n        }), \" -p \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Do you clear? [y/N]\\\"\"\n        }), \" -r\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"!\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token environment constant\",\n          children: \"$REPLY\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=~\"\n        }), \" ^\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \"yN\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \"$ \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"return\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Clearing \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \" in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    clear_node_modules \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"detect_venvs_and_clear_recurse\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  detect_venvs_and_clear \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"directories\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsxs(_components.span, {\n          className: \"token variable\",\n          children: [_jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$(\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"find\"\n          }), \" $\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" -maxdepth \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1\"\n          }), \" -type d -not -name \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\".*\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token variable\",\n            children: \")\"\n          })]\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"for\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token for-or-select variable\",\n          children: \"directory\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"in\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token variable\",\n          children: [\"${directories\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"@\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"}\"]\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"do\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$directory\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"==\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"continue\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$directory\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"==\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"/\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \"\\\"\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"continue\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    detect_venvs_and_clear_recurse \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$directory\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"done\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"clear_venvs_recurse\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"python_venv_key\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'.venv'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"node_env_key\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'node_modules'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"search_path\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsx(_components.span, {\n          className: \"token environment constant\",\n          children: \"$PWD\"\n        }), \"\\n  detect_venvs_and_clear_recurse \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$search_path\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"コードの解説\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#コードの解説\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"コードの解説\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"スクリプトの内部が気になる方向けの簡単紹介．\"\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"venvの記録と削除\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#venvの記録と削除\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"venvの記録と削除\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"pip freeze\"\n      }), \"すると，「現在の」pipでインストールされたパッケージが吐き出されるため，対象となる\", _jsx(_components.code, {\n        children: \".venv\"\n      }), \"を起動する必要がある．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"そこで，探索ディレクトリの\", _jsx(_components.code, {\n        children: \".venv/bin/activate\"\n      }), \"から実行環境を起動し，\", _jsx(_components.code, {\n        children: \"pip freeze\"\n      }), \"する．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"そして，忘れずに\", _jsx(_components.code, {\n        children: \"deactivate\"\n      }), \"をした後，\", _jsx(_components.code, {\n        children: \".venv\"\n      }), \"を削除する．\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"clear_python_venv\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"source\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"${python_venv_key}\"\n        }), \"/bin/activate\\n  pip freeze \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/requirements.txt\\n  deactivate\\n  \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"rm\"\n        }), \" -r \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"${python_venv_key}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"node_modulesの削除\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#node_modulesの削除\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"node_modulesの削除\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"を削除する．\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"clear_node_modules\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"rm\"\n        }), \" -r \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"${node_env_key}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"検出とクリア\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#検出とクリア\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"検出とクリア\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"探索ディレクトリ内に\", _jsx(_components.code, {\n        children: \".venv\"\n      }), \"/\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"を検出した場合，\", _jsx(_components.code, {\n        children: \"y/N\"\n      }), \"を質問する．\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"安全のため，デフォルトはNoにしており，y/Yのどちらかが入力された場合に，環境を削除する．\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"detect_venvs_and_clear\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" -e \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"/\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${python_venv_key}\"\n          }), \"\\\"\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"\\\"\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Detect \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${python_venv_key}\"\n          }), \" in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"read\"\n        }), \" -p \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Do you clear? [y/N]\\\"\"\n        }), \" -r\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"!\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token environment constant\",\n          children: \"$REPLY\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=~\"\n        }), \" ^\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \"yN\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \"$ \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"return\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Clearing \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${python_venv_key}\"\n          }), \"        in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    clear_python_venv \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" -e \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"/\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \"\\\"\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"\\\"\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Detect \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \" in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"read\"\n        }), \" -p \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Do you clear? [y/N]\\\"\"\n        }), \" -r\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"!\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token environment constant\",\n          children: \"$REPLY\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=~\"\n        }), \" ^\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \"yN\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \"$ \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"return\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"echo\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"Clearing \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \" in \", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"\\\"\"]\n        }), \"\\n    clear_node_modules \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"再帰的な検出とクリア\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#再帰的な検出とクリア\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"再帰的な検出とクリア\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"内部で再帰的に呼ばれる関数．\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"$1\"\n      }), \"は探索対象となるディレクトリとした．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"呼び出し時に，\", _jsx(_components.code, {\n        children: \".venv\"\n      }), \"/\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"を検出し，削除を確認し，処理する．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"find\"\n      }), \"コマンドにより探索ディレクトリ内のディレクトリを新しい探索ディレクトリとし，再帰する．この時，隠しファイルとなっているディレクトリは無視する．\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"また，\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"の中には無数の\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"が含まれており，それを内包する\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"を削除せずに内部の特定の\", _jsx(_components.code, {\n        children: \"node_modules\"\n      }), \"を削除するパターンは基本的に無いと考え，探索対象から除外する．\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"detect_venvs_and_clear_recurse\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  detect_venvs_and_clear \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"directories\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsxs(_components.span, {\n          className: \"token variable\",\n          children: [_jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$(\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"find\"\n          }), \" $\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" -maxdepth \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1\"\n          }), \" -type d -not -name \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\".*\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token variable\",\n            children: \")\"\n          })]\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"for\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token for-or-select variable\",\n          children: \"directory\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"in\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token variable\",\n          children: [\"${directories\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"@\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"}\"]\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"do\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$directory\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"==\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$1\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"continue\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$directory\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"==\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token string\",\n          children: [\"\\\"\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"$1\"\n          }), \"/\", _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"${node_env_key}\"\n          }), \"\\\"\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"then\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"continue\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fi\"\n        }), \"\\n    detect_venvs_and_clear_recurse \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$directory\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"done\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"呼び出し用関数\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#呼び出し用関数\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"呼び出し用関数\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"シェルスクリプトからの呼び出しに便利なように，再帰関数を囲む関数を準備した．\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"実際に呼び出す関数はこれになる．\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"利便性向上の為，キーをここで指定する．\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-name function\",\n          children: \"clear_venvs_recurse\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"python_venv_key\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'.venv'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"node_env_key\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'node_modules'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token assign-left variable\",\n          children: \"search_path\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), _jsx(_components.span, {\n          className: \"token environment constant\",\n          children: \"$PWD\"\n        }), \"\\n  detect_venvs_and_clear_recurse \", _jsx(_components.span, {\n          className: \"token variable\",\n          children: \"$search_path\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"おわりに\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#おわりに\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"おわりに\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"シェルスクリプト書くのまじつらい・・・\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"繰り返しになりますが，\\nコードは自由に複製・改変いただけますが，\\n全て自己責任でご利用ください．\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"参考\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#参考\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"参考\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://askubuntu.com/questions/266179/how-to-exclude-ignore-hidden-files-and-directories-in-a-wildcard-embedded-find\",\n          children: \"https://askubuntu.com/questions/266179/how-to-exclude-ignore-hidden-files-and-directories-in-a-wildcard-embedded-find\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://linuxize.com/post/how-to-compare-strings-in-bash/\",\n          children: \"https://linuxize.com/post/how-to-compare-strings-in-bash/\"\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"scope":{"title":"shellscriptによる自動化でディスク容量を削減する案","date":"2021-10-24T23:25:55","description":"node_modulesや.venvを検知して，再帰的に削除するスクリプト","tags":["shell","shellscript","bash","node_modules","venv"]}},"__N_SSG":true}