{"pageProps":{"toc":[{"content":"はじめに","slug":"はじめに","lvl":2,"i":0},{"content":"作業流れ","slug":"作業流れ","lvl":2,"i":1},{"content":"強制 Reboot","slug":"強制-reboot","lvl":3,"i":2},{"content":"デスクトップにログインできないことを確認","slug":"デスクトップにログインできないことを確認","lvl":3,"i":3},{"content":"パッケージの状態を確認","slug":"パッケージの状態を確認","lvl":3,"i":4},{"content":"削除してしまったパッケージを確認","slug":"削除してしまったパッケージを確認","lvl":3,"i":5},{"content":"削除してしまったパッケージをインストール","slug":"削除してしまったパッケージをインストール","lvl":3,"i":6},{"content":"再起動","slug":"再起動","lvl":3,"i":7},{"content":"動作確認","slug":"動作確認","lvl":3,"i":8},{"content":"動作確認","slug":"動作確認-1","lvl":3,"i":9},{"content":"おわりに","slug":"おわりに","lvl":2,"i":10},{"content":"参考","slug":"参考","lvl":2,"i":11}],"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    h2: \"h2\",\n    h3: \"h3\",\n    p: \"p\",\n    pre: \"pre\",\n    span: \"span\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.h2, {\n      id: \"はじめに\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#はじめに\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"はじめに\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Ubuntuで、usb周りのパッケージを更新したくて、再インストールなどをしていた。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"最新を取得したいと思い、 \", _jsx(_components.code, {\n        children: \"apt remove\"\n      }), \"をしたところ、その削除に伴い、デスクトップのUIがそのまま暗転し、何もできなくなってしまった。\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"作業流れ\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#作業流れ\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"作業流れ\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"強制-reboot\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#強制-reboot\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"強制 Reboot\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"いつものおまじないで、デスクトップを強制再起動する。\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-plain\",\n      children: _jsx(_components.code, {\n        className: \"language-plain\",\n        children: \"Alt+PrintScを押下したままR→S→E→I→U→B\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"デスクトップにログインできないことを確認\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#デスクトップにログインできないことを確認\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"デスクトップにログインできないことを確認\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"祈りつつも再起動したが、デスクトップにはログインできない。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"TTYログインはできたので、そのまま普段の認証情報でログインした。\"\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"パッケージの状態を確認\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#パッケージの状態を確認\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"パッケージの状態を確認\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"まずは、\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"sudo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"apt\"\n        }), \" update\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"して、\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"apt\"\n        }), \" list --upgradable\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"を確認までした。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"autoremove\"\n      }), \"の対象が存在するが、これは間違いなく実行してはいけないので、無視する。\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"削除してしまったパッケージを確認\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#削除してしまったパッケージを確認\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"削除してしまったパッケージを確認\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"幸い、 \", _jsx(_components.code, {\n        children: \"~/.bash_history\"\n      }), \"に、 \", _jsx(_components.code, {\n        children: \"apt remove\"\n      }), \"したコマンドが残っていた。\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"cat\"\n        }), \" ~/.bash_history \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"|\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"grep\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"'apt remove'\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"削除してしまったパッケージをインストール\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#削除してしまったパッケージをインストール\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"削除してしまったパッケージをインストール\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"sudo\"\n        }), \" dpkg --configure -a\\n$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"sudo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"apt\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"install\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"パッケージ名\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"再起動\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#再起動\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"再起動\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"祈りを込めて、\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"reboot\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"動作確認\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#動作確認\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"動作確認\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"引き続き、desktopにログインできないことを確認し、再度TTYログインし、削除してしまったパッケージにより、何が巻き込まれて削除されたかを確認する。\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"apt-cache\"\n        }), \" rdepends \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"パッケージ名\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"これをして、疑わしいパッケージを見つけたので、\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"sudo\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"apt\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"install\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"疑わしいパッケージ\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"をして、\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"reboot\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"動作確認-1\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#動作確認-1\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"動作確認\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"無事、desktopにログインできることを確認した。\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"おわりに\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#おわりに\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"おわりに\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"今回は、ネットワーク接続が可能な状態だったのが不幸中の幸いだった。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"反省として、今後は以下の記載内容をしっかりと確認してコマンド実行をする。\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"The following packages will be REMOVED:\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"参考\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#参考\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"参考\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"scope":{"title":"ubuntuのapt removeしたらデスクトップが使えなくなった話とその対処","date":"2025-09-30T02:51:30","description":"間違えて重要なパッケージを消してしまった","tags":["ubuntu","desktop","error","fix"]}},"__N_SSG":true}