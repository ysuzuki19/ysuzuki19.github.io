{"pageProps":{"toc":[{"content":"目次","slug":"目次","lvl":2,"i":0},{"content":"はじめに","slug":"はじめに","lvl":2,"i":1},{"content":"サンプルコードを複雑化","slug":"サンプルコードを複雑化","lvl":2,"i":2},{"content":"サンプルコードのカバレッジと解釈","slug":"サンプルコードのカバレッジと解釈","lvl":2,"i":3},{"content":"htmlに出力","slug":"htmlに出力","lvl":2,"i":4},{"content":"vscodeで表示","slug":"vscodeで表示","lvl":2,"i":5},{"content":"サンプルコードのTestを改善","slug":"サンプルコードのtestを改善","lvl":2,"i":6},{"content":"おわりに","slug":"おわりに","lvl":2,"i":7},{"content":"目次","slug":"目次-1","lvl":2,"i":8}],"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    div: \"div\",\n    h2: \"h2\",\n    li: \"li\",\n    p: \"p\",\n    pre: \"pre\",\n    span: \"span\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.h2, {\n      id: \"目次\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#目次\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"目次\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"/post/rust-llvm-coverage-0-overview\",\n          children: \"0 概要\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"/post/rust-llvm-coverage-1-basic\",\n          children: \"1 基礎\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"2 可視化\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"/post/rust-llvm-coverage-3-coverage-off\",\n          children: \"3 カバレッジ計測の範囲無効\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"はじめに\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#はじめに\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"はじめに\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ターミナルでカバレッジ計測結果を表示するのはお手軽に状態を確認できて便利である。しかし、このままだと、カバレッジへの対処が若干難しい。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"具体的には、どこがカバーされているか（あるいはされていないのか）の切り分けや、多くのファイルが並んでいる場合に、どこから手を付けるのかの判断が難しい。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"そこで、カバー状態を、よりコードにフレンドリーに表示・閲覧する手法を２つ紹介する。\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"サンプルコードを複雑化\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#サンプルコードを複雑化\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"サンプルコードを複雑化\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"準備してあるサンプルコードが\", _jsx(_components.code, {\n        children: \"main()\"\n      }), \"のみのものだったので、カバレッジを可視化する意義が薄いので、少しコードを複雑にしてみる。\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"src/main.rs\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-rust\",\n      children: _jsxs(_components.code, {\n        className: \"language-rust\",\n        children: [_jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"type\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token type-definition class-name\",\n          children: \"SampleResult\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"T\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Result\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"T\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Box\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"dyn\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token namespace\",\n          children: [\"std\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"::\"\n          }), \"error\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"::\"\n          })]\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Error\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">>\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"main\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"->\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"SampleResult\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" args \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsxs(_components.span, {\n          className: \"token namespace\",\n          children: [\"std\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"::\"\n          }), \"env\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"::\"\n          })]\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"args\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"collect\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Vec\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"String\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">>\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" message \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"greet\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"?\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"println!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"{message}\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Ok\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"greet\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Vec\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"String\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"->\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"SampleResult\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"String\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" name \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"get\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"1\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"ok_or\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"?\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" age \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"match\"\n        }), \" args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"get\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token number\",\n          children: \"2\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Some\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"value\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=>\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Some\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"value\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"parse\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"u32\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"?\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"None\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=>\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"None\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\\n    \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Ok\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"match\"\n        }), \" age \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Some\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"age\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=>\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"format!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Hello, {name}! You are {age} years old.\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"None\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=>\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"format!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Hello, {name}!\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[cfg(test)]\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"mod\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token module-declaration namespace\",\n          children: \"tests\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"use\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"super\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"*\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\\n    \", _jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[test]\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"test_main\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"assert!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"main\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"is_err\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"サンプルとし、このような構成とした。\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"type SamplResult\"\n        }), \": サンプル内で使いまわす汎用エラー型\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"fn main()\"\n        }), \": 実行のエントリポイントのみとして働き、標準出力も行う\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"fn greet()\"\n        }), \": 処理の本体。これをTest対象として入力のバリエーションを受け入れられ、メッセージを戻り値にしておく\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ここでは、エラーハンドリングなどはかなり簡略化している。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"fn test_main()\"\n      }), \"での\", _jsx(_components.code, {\n        children: \"main()\"\n      }), \"はargsを読み込むが、引数がない場合はエラーになるのが望ましいので、アサーションを入れておく。\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"サンプルコードのカバレッジと解釈\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#サンプルコードのカバレッジと解釈\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"サンプルコードのカバレッジと解釈\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ cargo llvm-cov\\n\\ninfo: cargo-llvm-cov currently setting cfg\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"coverage\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" you can opt-out it by passing --no-cfg-coverage\\n   Compiling coverage v0.1.0 \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"path\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"to\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"project\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/coverage\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n    Finished \", _jsxs(_components.span, {\n          className: \"token variable\",\n          children: [_jsx(_components.span, {\n            className: \"token variable\",\n            children: \"`\"\n          }), _jsx(_components.span, {\n            className: \"token builtin class-name\",\n            children: \"test\"\n          }), _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"`\"\n          })]\n        }), \" profile \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \"unoptimized + debuginfo\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \" target\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"s\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"in\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \".23s\\n     Running unittests src/main.rs \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"target/llvm-cov-target/debug/deps/coverage-90ad100d3a119901\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n\\nrunning \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"1\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" tests::test_main \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \". ok\\n\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" result: ok. \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"1\"\n        }), \" passed\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" failed\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" ignored\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" measured\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" filtered out\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" finished \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"in\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \".00s\\n\\nFilename                                         Regions    Missed Regions     Cover   Functions  Missed Functions  Executed       Lines      Missed Lines     Cover    Branches   Missed Branches     Cover\\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\n/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"path\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"to\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"project\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/coverage/src/main.rs           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"20\"\n        }), \"                \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"11\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"45.00\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"100.00\"\n        }), \"%          \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"18\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"55.56\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"         -\\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\nTOTAL                                                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"20\"\n        }), \"                \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"11\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"45.00\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"3\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"100.00\"\n        }), \"%          \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"18\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"8\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"55.56\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"         -\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"まず、サンプルコード更新の期待通りにカバレッジは低下し、\", _jsx(_components.code, {\n        children: \"45%\"\n      }), \"となった。実際にTestの処理を追っていくと、\", _jsx(_components.code, {\n        children: \"greet()\"\n      }), \"に入ってすぐに\", _jsx(_components.code, {\n        children: \"args.get(1)\"\n      }), \"が失敗するので、続く処理は行われず、カバーされないのが原因である。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Executedの数値が\", _jsx(_components.code, {\n        children: \"100%\"\n      }), \"となっているのは、\", _jsx(_components.code, {\n        children: \"main()\"\n      }), \"から \", _jsx(_components.code, {\n        children: \"greet()\"\n      }), \"が呼び出されているためである。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"このシンプルなサンプルにおいては、単純に処理を追うだけで十分カバレッジの状態を把握できる。しかし、複数ファイル・modがあり、さらにそれらをまたがってTestされる場合、完全に脳内でカバー範囲を把握するのは難しい。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"そのようなシチュエーションでは、カバレッジの可視化を行うと便利である。\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"htmlに出力\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#htmlに出力\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"htmlに出力\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"追加の準備なく、最も簡単に可視化する方法は、HTMLであろう。 \", _jsx(_components.code, {\n        children: \"llvm-cov\"\n      }), \"に\", _jsx(_components.code, {\n        children: \"--html\"\n      }), \"オプションが組み込まれているので、これを使う。\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ cargo llvm-cov --html\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"とし、 \", _jsx(_components.code, {\n        children: \"file:///<path>/<to>/<project>/coverage/target/llvm-cov/html/index.html\"\n      }), \"をブラウザで開くと、カバレッジが可視化される。\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ cargo llvm-cov --open\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"とすると、htmlを生成しつつブラウザが自動で開く。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"index.html\"\n      }), \"はクレート全体の各ファイルのカバレッジが表示され、ここは主にterminal表示に近い情報を提供する。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ファイル名をクリックすると、ファイルのソースコードとカバーエリアと通過回数が表示され、通っていない行は赤くハイライトされる。\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"vscodeで表示\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#vscodeで表示\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"vscodeで表示\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://marketplace.visualstudio.com/items?itemName=ryanluker.vscode-coverage-gutters\",\n        children: \"Coverage Gutters\"\n      }), \"というVSCodeの拡張機能を使うと、カバレッジを視覚的に表示できた。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"そのためには、\", _jsx(_components.code, {\n        children: \"lcov.info\"\n      }), \"としてカバレッジ計測結果を出力する必要がある。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"拡張機能をインストールしたあと、\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ cargo llvm-cov --lcov --output-path target/lcov.info\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"と実行し、　Command Palette (\", _jsx(_components.code, {\n        children: \"Ctrl+Shift+p\"\n      }), \", \", _jsx(_components.code, {\n        children: \"Cmd+Shift+p\"\n      }), \") から \", _jsx(_components.code, {\n        children: \"Coverage Gutters: Display Coverage\"\n      }), \" を選択すると、カバレッジが表示される。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"Coverage Gutters: Watch\"\n      }), \"を選択すると、再度上記コマンドを実行したときに自動で表示が更新される。\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"サンプルコードのtestを改善\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#サンプルコードのtestを改善\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"サンプルコードのTestを改善\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"上のサンプルコードのTestは不足しており、\", _jsx(_components.code, {\n        children: \"greet()\"\n      }), \"はアサーションがないため、カバレッジは特に低い。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"そこで、カバレッジの計測をしつつ、Testをいくつか追加していった。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Testの最終形としては、以下のようになり、\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"src/main.rs\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-rust\",\n      children: _jsxs(_components.code, {\n        className: \"language-rust\",\n        children: [_jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[cfg(test)]\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"mod\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token module-declaration namespace\",\n          children: \"tests\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"use\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"super\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"*\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\\n    \", _jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[test]\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"test_main\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"assert!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"main\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"is_err\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n    \", _jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[test]\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"greet_empty\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" args \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"vec!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"assert!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"greet\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"is_err\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n    \", _jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[test]\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"greet_with_name\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"->\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"SampleResult\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" args \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"vec!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"program\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"to_string\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Alice\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"to_string\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" message \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"greet\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"?\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"assert_eq!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"message\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Hello, Alice!\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Ok\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n    \", _jsx(_components.span, {\n          className: \"token attribute attr-name\",\n          children: \"#[test]\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"fn\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function-definition function\",\n          children: \"greet_with_name_and_age\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"->\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"SampleResult\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" args \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"vec!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"program\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"to_string\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Bob\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"to_string\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"30\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"to_string\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"let\"\n        }), \" message \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"greet\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"args\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"?\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token macro property\",\n          children: \"assert_eq!\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"message\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"Hello, Bob! You are 30 years old.\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n        \", _jsx(_components.span, {\n          className: \"token class-name\",\n          children: \"Ok\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"カバレッジはかなり向上した。\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-bash\",\n      children: _jsxs(_components.code, {\n        className: \"language-bash\",\n        children: [\"$ cargo llvm-cov\\n\\ninfo: cargo-llvm-cov currently setting cfg\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"coverage\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" you can opt-out it by passing --no-cfg-coverage\\n   Compiling coverage v0.1.0 \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"path\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"to\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"project\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/coverage\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n    Finished \", _jsxs(_components.span, {\n          className: \"token variable\",\n          children: [_jsx(_components.span, {\n            className: \"token variable\",\n            children: \"`\"\n          }), _jsx(_components.span, {\n            className: \"token builtin class-name\",\n            children: \"test\"\n          }), _jsx(_components.span, {\n            className: \"token variable\",\n            children: \"`\"\n          })]\n        }), \" profile \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"[\"\n        }), \"unoptimized + debuginfo\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"]\"\n        }), \" target\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"s\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"in\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \".23s\\n     Running unittests src/main.rs \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"target/llvm-cov-target/debug/deps/coverage-90ad100d3a119901\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \"\\n\\nrunning \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"4\"\n        }), \" tests\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" tests::greet_empty \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \". ok\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" tests::greet_with_name_and_age \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \". ok\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" tests::greet_with_name \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \". ok\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" tests::test_main \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"..\"\n        }), \". ok\\n\\n\", _jsx(_components.span, {\n          className: \"token builtin class-name\",\n          children: \"test\"\n        }), \" result: ok. \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"4\"\n        }), \" passed\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" failed\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" ignored\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" measured\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \" filtered out\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \" finished \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"in\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \".00s\\n\\nFilename                                         Regions    Missed Regions     Cover   Functions  Missed Functions  Executed       Lines      Missed Lines     Cover    Branches   Missed Branches     Cover\\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\n/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"path\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"to\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<\"\n        }), \"project\", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \">\"\n        }), \"/coverage/src/main.rs           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"37\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"5\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"86.49\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"100.00\"\n        }), \"%          \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"34\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"2\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"94.12\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"         -\\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\\nTOTAL                                                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"37\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"5\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"86.49\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"6\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"   \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"100.00\"\n        }), \"%          \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"34\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"2\"\n        }), \"    \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"94.12\"\n        }), \"%           \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"                 \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), \"         -\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"line coverageが100%になっていないのは、 \", _jsx(_components.code, {\n        children: \"main()\"\n      }), \"の中の\", _jsx(_components.code, {\n        children: \"greet()\"\n      }), \"が成功したパターンを通っていないため。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Testの追加によってカバレッジが改善していく様子は、このtestコードを上から順に追加していき、都度カバレッジを計測すると差がわかりやすい。\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"おわりに\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#おわりに\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"おわりに\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"使ってみた感覚的には、上に上げた可視化手法はだいたい以下の使い分けができそう。\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"html出力　： 広域のカバレッジ計測を一望するのに便利\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"vscode表示： カバレッジ改善\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"目次-1\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#目次-1\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"目次\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"/post/rust-llvm-coverage-0-overview\",\n          children: \"0 概要\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"/post/rust-llvm-coverage-1-basic\",\n          children: \"1 基礎\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"2 可視化\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"/post/rust-llvm-coverage-3-coverage-off\",\n          children: \"3 カバレッジ計測の範囲無効\"\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"scope":{"title":"Rustでcoverage計測する ~2. 可視化~","date":"2025-06-08T01:42:08","description":"llvm-covのカバレッジ計測の可視化を紹介","tags":["rust","coverage","llvm"]}},"__N_SSG":true}