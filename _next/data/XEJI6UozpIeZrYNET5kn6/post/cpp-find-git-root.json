{"pageProps":{"toc":[{"content":"環境","slug":"環境","lvl":2,"i":0},{"content":"アルゴリズム","slug":"アルゴリズム","lvl":2,"i":1},{"content":"コード","slug":"コード","lvl":2,"i":2},{"content":"公開","slug":"公開","lvl":2,"i":3}],"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    a: \"a\",\n    span: \"span\",\n    code: \"code\",\n    pre: \"pre\",\n    ol: \"ol\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"Git でプロジェクト管理している時、プログラム内で Git ルートディレクトリを参照したいときがあると思う。\\nそんな時は再帰を活用すると楽にできる。\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"環境\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#環境\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"環境\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Ubuntu 上で\", _jsx(_components.code, {\n        children: \"boost::filesystem\"\n      }), \"を利用した。\\n他の言語やライブラリでも同じアルゴリズムで Git ルートを探すことができる。\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"Ubuntu20.04LTS\\ng++ (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0\\nBoost 1.71\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"アルゴリズム\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#アルゴリズム\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"アルゴリズム\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"探索開始（SearchDir:カレントディレクトリ）\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"SearchDir に\", _jsx(_components.code, {\n          children: \".git\"\n        }), \"が含まれていれば SearchDir を返す\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"親ディレクトリがユーザのホームであれば空のパスを返す\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"親ディレクトリ SearchDir として 2 に戻る\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"コード\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#コード\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"コード\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-cpp\",\n      children: _jsxs(_components.code, {\n        className: \"language-cpp\",\n        children: [_jsxs(_components.span, {\n          className: \"token macro property\",\n          children: [_jsx(_components.span, {\n            className: \"token directive-hash\",\n            children: \"#\"\n          }), _jsx(_components.span, {\n            className: \"token directive keyword\",\n            children: \"include\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"<iostream>\"\n          })]\n        }), \"\\n\\n\", _jsxs(_components.span, {\n          className: \"token macro property\",\n          children: [_jsx(_components.span, {\n            className: \"token directive-hash\",\n            children: \"#\"\n          }), _jsx(_components.span, {\n            className: \"token directive keyword\",\n            children: \"include\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"<boost/filesystem.hpp>\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"token macro property\",\n          children: [_jsx(_components.span, {\n            className: \"token directive-hash\",\n            children: \"#\"\n          }), _jsx(_components.span, {\n            className: \"token directive keyword\",\n            children: \"include\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"<boost/filesystem/operations.hpp>\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"namespace\"\n        }), \" fs \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" boost\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"filesystem\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\\nboost\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"filesystem\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"path \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"find_git_root\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"boost\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"filesystem\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"path directory\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"for\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"auto\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"&\"\n        }), \" filename \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \":\"\n        }), \" boost\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"filesystem\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"directory_iterator\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"directory\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"filename\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"path\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"leaf\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"string\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"==\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\".git\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"return\"\n        }), \" directory\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"if\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"directory\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"branch_path\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"==\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"getenv\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"HOME\\\"\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"return\"\n        }), \" boost\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"filesystem\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"path\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"find_git_root\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"directory\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \".\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"branch_path\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"int\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"main\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"int\"\n        }), \" argc\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \",\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"char\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"*\"\n        }), _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"*\"\n        }), \" argv\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"{\"\n        }), \"\\n  fs\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"path git_root \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"=\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token function\",\n          children: \"find_git_root\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), \"fs\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), _jsx(_components.span, {\n          className: \"token function\",\n          children: \"current_path\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"(\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \")\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n  std\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"cout \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<<\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token string\",\n          children: \"\\\"GIT ROOT DIR : \\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<<\"\n        }), \" git_root \", _jsx(_components.span, {\n          className: \"token operator\",\n          children: \"<<\"\n        }), \" std\", _jsx(_components.span, {\n          className: \"token double-colon punctuation\",\n          children: \"::\"\n        }), \"endl\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"token keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"token number\",\n          children: \"0\"\n        }), _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \";\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"token punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"公開\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#公開\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"公開\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/ysuzuki19/BoostSamples/blob/main/boost_filesystem/find_git_root/main.cpp\",\n        children: \"こちら\"\n      }), \"にソースコードを公開した。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"CmakeLists.txt\"\n      }), \"も合わせて公開してあるので、クローンすれば問題なく動作するはず\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"scope":{"title":"C++でGitRootを探す方法","date":"2020-11-19T14:15:36+09:00","description":"boost::fsでgitのルートを見つけた","tags":["c++","git","boost","fs"]}},"__N_SSG":true}